# AI 재현성 평가 프레임워크

**생성 일시**: 2026-02-15
**평가 차원**: 3가지

## 1. 평가 차원 개요

| 차원 | 설명 | 평가 방법 | 기대 재현성 |
|------|------|-----------|-----------|
| **AI 응답 재현성** | 동일 프롬프트 → AI 응답 | 10회 반복 후 유사도 측정 | 70-90% |
| **파이프라인 종단 재현성** | 전체 5단계 실행 | 10회 실행 후 문서 비교 | 60-85% |
| **시간 추적성** | 다른 시점에서 실행 | 동일 입력+시드로 재현 | 80-95% |

## 2. 상세 평가 방법

### 2.1 AI 응답 재현성

**목표**: 동일 프롬프트에 대한 AI 응답의 일관성 측정

**변수 요인**:
- AI 모델 내부 랜덤성 (Temperature, Top-p)
- API 서버 상태
- 네트워크 지연
- 모델 버전/업데이트

**평가 지표**:
- 길이 유사도 (Length Similarity)
- 단어 중첩도 (Jaccard Similarity)
- 해시 일치 (Exact Match)
- 종합 유사도 (Overall Score)

**기대 결과**:
| 설정 | 기대 재현성 | 설명 |
|------|-------------|------|
| Temperature=0 | 95-100% | 결정론적 모드 |
| Temperature=0.7 | 70-85% | 창의성 모드 (일반적) |
| Temperature=1.0+ | 50-70% | 고변동성 모드 |

### 2.2 파이프라인 종단 재현성

**목표**: 전체 5단계 파이프라인의 재현성 측정

**변수 요인**:
- 각 단계의 AI 응답 변동성 (누적)
- 4개 AI 모델 간의 상호작용
- Phase 간 컨텍스트 전달 차이
- 외부 요인 (시간, 네트워크)

**평가 지표**:
- 최종 문서 길이 분산
- 섹션별 내용 유사도
- 핵심 주제 보존율
- 구조적 일관성

**기대 결과**:
| 구성 | 기대 재현성 | 설명 |
|------|-------------|------|
| 모든 AI: Temperature=0 | 85-95% | 최고 일관성 모드 |
| 혼합: 일부 Temperature>0 | 60-80% | 일반적인 운영 모드 |
| 모든 AI: Temperature>0.7 | 40-60% | 고창의성 모드 |

### 2.3 시간 추적성

**목표**: 시간이 지난 후 동일 결과 재현 가능성

**변수 요인**:
- AI 모델 업데이트
- 템플릿/코드 변경
- 환경 설정 변경
- 시드 설정 유효성

**평가 방법**:
```python
# 시점 1: 현재 실행
result1 = run_pipeline(topic, seed=42)
save_checkpoint(result1, 'checkpoint_v1.json')

# 시점 2: 24시간 후 (또는 1주 후)
result2 = run_pipeline(topic, seed=42)
compare_results(result1, result2)
```

**기대 결과**:
| 조건 | 기대 재현성 | 설명 |
|------|-------------|------|
| 코드/템플릿 동결 | 90-98% | 버전 관리 완료 시 |
| AI 모델 버전 고정 | 85-95% | 모델 버전 지정 시 |
| AI 모델 최신 사용 | 70-85% | 업데이트 영향 있음 |

## 3. 실행 방법

### 3.1 현재 상태

```bash
# 현재는 프레임워크만 제공 (실제 AI 호출 필요)
python tests/test_ai_reproducibility.py
# → 프레임워크 구조 출력
```

### 3.2 실제 평가 실행

```bash
# 1. API 키 설정
export OPENAI_API_KEY="sk-..."
export ANTHROPIC_API_KEY="sk-..."
export GEMINI_API_KEY="..."
export PERPLEXITY_API_KEY="..."

# 2. AI 응답 재현성 평가
python tests/test_ai_reproducibility.py --dimension ai-response \
    --prompt "AI 기반 스마트폰 관리 시스템" \
    --model claude --iterations 10

# 3. 파이프라인 재현성 평가
python tests/test_ai_reproducibility.py --dimension pipeline \
    --topic "AI SaaS 플랫폼" --type bizplan --iterations 10

# 4. 시간 추적성 평가
python tests/test_ai_reproducibility.py --dimension temporal \
    --topic "AI SaaS 플랫폼" --seed 42 --time-gap 24
```

## 4. 결과 보고서 형식

### 4.1 AI 응답 재현성 보고서

```markdown
# AI 응답 재현성 평가 결과

## 평가 개요
- AI 모델: Claude 3.5 Sonnet
- 프롬프트: "[프롬프트 내용]"
- 반복 횟수: 10회
- Temperature: 0.7

## 결과 요약
| 지표 | 평균 | 최소 | 최대 | 표준편차 |
|------|------|------|------|----------|
| 길이 유사도 | 0.95 | 0.90 | 0.98 | 0.02 |
| Jaccard 유사도 | 0.78 | 0.65 | 0.85 | 0.06 |
| 해시 일치 | 0/10 | - | - | - |
| 종합 점수 | 0.82 | - | - | - |
```

### 4.2 파이프라인 재현성 보고서

```markdown
# 파이프라인 종단 재현성 평가 결과

## 평가 개요
- 주제: "AI 기반 스마트폰 관리 시스템"
- 문서 유형: bizplan
- 반복 횟수: 10회

## 결과 요약
| Phase | 평균 재현성 | 변동 계수 |
|-------|-------------|----------|
| Phase 1: 아이디어 생성 | 85% | 12% |
| Phase 2: 시장 조사 | 78% | 18% |
| Phase 3: 전략 분석 | 82% | 15% |
| Phase 4: 문서 작성 | 75% | 22% |
| Phase 5: 검증/폴리싱 | 80% | 16% |
| **종단 재현성** | **72%** | **25%** |
```

### 4.3 시간 추적성 보고서

```markdown
# 시간 추적성 평가 결과

## 평가 개요
- 주제: "AI 기반 스마트폰 관리 시스템"
- 시드: 42
- 시간 간격: 24시간

## 결과 요약
| 항목 | 시점 1 | 시점 2 | 유사도 |
|------|--------|--------|--------|
| 실행 시간 | 2025-02-15 10:00 | 2025-02-16 10:00 | - |
| 문서 길이 | 12,345자 | 12,401자 | 99.6% |
| 섹션 구조 | 동일 | 동일 | 100% |
| 핵심 주제 | 15개 | 15개 | 100% |
| 종합 유사도 | - | - | 92% |
```

## 5. 제한 사항

| 항목 | 설명 |
|------|------|
| **API 비용** | 10회 반복 시 실제 API 호출 비용 발생 |
| **실행 시간** | 파이프라인 10회 실행 시 약 2-3시간 소요 |
| **모델 변경** | AI 모델 업데이트 시 재현성 저하 가능 |
| **외부 요인** | 네트워크, 서버 상태 등 통제 불가능 요인 |

## 6. 개선 권장사항

**재현성 향상을 위한 설정**:

1. **Temperature 설정**
   ```python
   # 높은 재현성 필요 시
   temperature = 0  # 결정론적 모드

   # 창의성 필요 시
   temperature = 0.7  # 일반 모드
   ```

2. **시드 설정**
   ```python
   # 재현성 필요 시 고정 시드 사용
   seed = 42
   np.random.seed(seed)
   ```

3. **버전 고정**
   ```python
   # AI 모델 버전 명시
   model = "claude-3-5-sonnet-20241022"  # 특정 버전
   ```

*문서 버전: 1.0.0*
*생성일: 2026-02-15*